## Week 6 ARTS
------
### [A] - LC: 290. Word Pattern
------
```java
package leetcode;

import java.util.HashMap;
import java.util.Map;

/**
 * 290. Word Pattern
 *
 * Given a pattern and a string str, find if str follows the same pattern.
 *
 * Here follow means a full match, such that there is a bijection between a letter in pattern and a non-empty word in str.
 *
 * Example 1:
 *
 * Input: pattern = "abba", str = "dog cat cat dog"
 * Output: true
 * Example 2:
 *
 * Input:pattern = "abba", str = "dog cat cat fish"
 * Output: false
 * Example 3:
 *
 * Input: pattern = "aaaa", str = "dog cat cat dog"
 * Output: false
 * Example 4:
 *
 * Input: pattern = "abba", str = "dog dog dog dog"
 * Output: false
 * Notes:
 * You may assume pattern contains only lowercase letters, and str contains lowercase letters separated by a single space.
 */
public class WordPattern290 {

  public boolean wordPattern(String pattern, String str) {
    // checking length
    String[] strs = str.split(" ");
    if (pattern.length() != strs.length) return false;
    // first map checking character in pattern matching string in str
    Map<Character, String> fMap = new HashMap<>();
    // second map checking from string in str matching character in pattern
    Map<String, Character> sMap = new HashMap<>();

    for (int i = 0; i < strs.length; i++) {
      char ch = pattern.charAt(i);
      if (!fMap.containsKey(ch)) {
        fMap.put(ch, strs[i]);
      }
      if (!fMap.get(ch).equals(strs[i])) return false;
      if (!sMap.containsKey(strs[i])) {
        sMap.put(strs[i], ch);
      }
      if (sMap.get(strs[i]) != ch) return false;
    }
    return true;
  }

  public static void main(String[] args) {
    WordPattern290 test = new WordPattern290();
    System.out.println(test.wordPattern("abba", "dog cat cat dog"));
    System.out.println(test.wordPattern("abba", "dog cat cat fish"));
    System.out.println(test.wordPattern("aaaa", "dog cat cat dog"));
    System.out.println(test.wordPattern("abba", "dog dog dog dog"));
  }
}

```
```java
package leetcode;

import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

/**
 * 291. Word Pattern II
 *
 * Given a pattern and a string str, find if str follows the same pattern.
 * Here follow means a full match, such that there is a bijection between a letter in pattern and a non-empty substring in str.
 *
 * Examples:
 * pattern = "abab", str = "redblueredblue" should return true.
 * pattern = "aaaa", str = "asdasdasdasd" should return true.
 * pattern = "aabb", str = "xyzabcxzyabc" should return false.
 *
 * Notes:
 * You may assume both pattern and str contains only lowercase letters.
 */
public class WordPatternII291 {
  /**
   * This is much harder than word pattern which gave you a space separated strings.
   * Now you will need to self define string.
   * In this case, we will need to split string one by one to match the character in pattern.
   * Using one map character to string, and a set to store the defined string,
   * Backtracking string to match all characters
   *
   * E.g: pattern: "abab", string: "redblueredblue"
   * 'a' -> "r", 'b' -> "e", 'a' -> "d" (not match, first one match "r"), now backtrack
   * let 'b' -> ed", 'a' -> "b" (still not match), backtracking~
   * continue~~ until the whole string not match.
   *
   * now let 'a' -> "re", 'b' -> "d" ~ continue the process, not matching, then backtracking
   * ...
   * ...
   * let 'a' -> "red", 'b' -> "blue", all match, then return true.
   *
   * Keep backtracking the character and string matching, not then backtracking, found then return true.
   * Using recursive backtracking solution.
   *
   * let pattern be n, string be m, here
   * big O: O(m ^ n)
   */

  public boolean wordPatternMatch(String pattern, String str) {
    if (str.length() < pattern.length()) return false;
    Map<Character, String> map = new HashMap<>();
    Set<String> set = new HashSet<>();

    return isMatching(pattern, 0, str, 0, map, set);
  }

  private boolean isMatching(String pattern, int pIdx, String str, int sIdx,
                             Map<Character, String> map, Set<String> set) {
    // all matching, return true
    if (pIdx == pattern.length() && sIdx == str.length()) return true;
    // not matching, return false
    if (pIdx == pattern.length() || sIdx == str.length()) return false;

    char curr = pattern.charAt(pIdx);

    if (map.containsKey(curr)) {
      String existingStr = map.get(curr);

      if (!str.startsWith(existingStr, sIdx)) return false;

      return isMatching(pattern, pIdx + 1, str, sIdx + existingStr.length(), map, set);
    }

    for (int i = sIdx; i < str.length(); i++) {
      String currString = str.substring(sIdx, i + 1);
      if (!set.add(currString)) continue;
      map.put(curr, currString);

      if (isMatching(pattern, pIdx + 1, str, i + 1, map, set)) return true;

      // backtracking
      map.remove(curr);
      set.remove(currString);
    }

    return false;
  }

  public static void main(String[] args) {
    WordPatternII291 test = new WordPatternII291();
    System.out.println(test.wordPatternMatch("abab", "redblueredblue"));
    System.out.println(test.wordPatternMatch("aaaa", "asdasdasdasd"));
    System.out.println(test.wordPatternMatch("aabb", "xyzabcxzyabc"));
    System.out.println(test.wordPatternMatch("aabb", "xy"));
    System.out.println(test.wordPatternMatch("a", "xy"));
    System.out.println(test.wordPatternMatch("ab", "xyssgsd"));
    System.out.println(test.wordPatternMatch("ab", ""));
    System.out.println(test.wordPatternMatch("", ""));
    System.out.println(test.wordPatternMatch("s", ""));
  }
}

```

### [R] - Docker Implement MySql master-slave instances on a single machine (Mac) - For local test only
------
Recently I am working on setting up MySql Store replication, first I need to set up multiple MySql instances on my local (single machine). So I reviewed some examples and using Docker for this task, simply create multiple docker containers for instances and expose MySql ports for localhost connection.

MySql master slave replication, below pic from [MySQL Master-Slave Replication on the Same Machine](https://www.toptal.com/mysql/mysql-master-slave-replication-tutorial)

![alt text](https://github.com/snowan/ARTS/blob/w5-arts/images/mysql-master-slave.png)

- Using docker compose for Master and Slave containers, example:
```yaml
version: "3.3"
services:
  mysql-master: &mysql
    image: mysql:5.7.20
    container_name: mysql-master
    restart: always
    env_file:
      - env/base.env
      - env/master.env
    environment:
      - MYSQL_ROOT_PASSWORD=root_pwd
    ports:
      - "3306:3306"
    expose:
      - "3306"
    volumes:
      - mysql-master-data:/var/lib/mysql
    command: [  # using a custom MySql configuration file
      "--log-bin=mysql-bin",
      "--server-id=1",
      "--character-set-server=utf8mb4",
      "--collation-server=utf8mb4_unicode_ci",
      "--innodb_flush_log_at_trx_commit=1",
      "--sync_binlog=1"
      ]

  mysql-slave: &mysql-slave
    <<: *mysql
    container_name: mysql-slave
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MASTER_MYSQL_ROOT_PASSWORD=root_pwd
    ports:
      - "3307:3306"
    depends_on:
      - mysql-master
    volumes:
      - mysql-slave-data:/var/lib/mysql
    command: [
      "--server-id=2", # server id must be different than master server id
      "--character-set-server=utf8mb4",
      "--collation-server=utf8mb4_unicode_ci",
      ]
 

volumes:
  mysql-master-data:
  mysql-slave-data:
```
#### [Using a custom MYSQL configuration file](https://hub.docker.com/_/mysql/)
>**Configuration without a cnf file**
Many configuration options can be passed as flags to mysqld. This will give you the flexibility to customize the container without needing a cnf file. For example, if you want to change the default encoding and collation for all tables to use UTF-8 (utf8mb4) just run the following:
>
>`$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci`
>
>If you would like to see a complete list of available options, just run:
>
>`$ docker run -it --rm mysql:tag --verbose --help`

- Create docker containers
`docler-compose up`

- Connection to localhost
` mysql -h localhost -P 3306 -u root --protocol=tcp -p[if set up root password]`

- Connecting to MySQL Server from within the Container
```
docker exec -it [container id] mysql -uroot -p
# Create a 
mysql> CREATE USER '[replication_user]'@'%' IDENTIFIED BY '[password]’;
# grant privilege
mysql> GRANT ALL PRIVILEGES ON * . * TO '[replication_user]'@'%’;
```
- Checking MYSQL master and slave status
```
# Start Slave
mysql> start slave;
# Checking slave status
mysql> show slave status;
```
Slave Status example output: **Slave_IO_Running** and **Slave_SQL_Running** values must be **Yes**. then master-slave set up correctly.
```
[
  {
    "Slave_IO_State": "Waiting for master to send event",
    "Master_Host": "mysql-master",
    "Master_User": "replication",
    "Master_Port": 3306,
    "Connect_Retry": 60,
    "Master_Log_File": "mysql-bin.000004",
    "Read_Master_Log_Pos": 154,
    "Relay_Log_File": "54916ce8f777-relay-bin.000007",
    "Relay_Log_Pos": 367,
    "Relay_Master_Log_File": "mysql-bin.000004",
    "Slave_IO_Running": "Yes", # Value must be YES
    "Slave_SQL_Running": "Yes", # Value must be YES
    "Replicate_Do_DB": "",
    "Replicate_Ignore_DB": "",
    "Replicate_Do_Table": "",
    "Replicate_Ignore_Table": "",
    "Replicate_Wild_Do_Table": "",
    "Replicate_Wild_Ignore_Table": "",
    "Last_Errno": 0,
    "Last_Error": "",
    "Skip_Counter": 0,
    "Exec_Master_Log_Pos": 154,
    "Relay_Log_Space": 747,
    "Until_Condition": "None",
    "Until_Log_File": "",
    "Until_Log_Pos": 0,
    "Master_SSL_Allowed": "No",
    "Master_SSL_CA_File": "",
    "Master_SSL_CA_Path": "",
    "Master_SSL_Cert": "",
    "Master_SSL_Cipher": "",
    "Master_SSL_Key": "",
    "Seconds_Behind_Master": 0,
    "Master_SSL_Verify_Server_Cert": "No",
    "Last_IO_Errno": 0,
    "Last_IO_Error": "",
    "Last_SQL_Errno": 0,
    "Last_SQL_Error": "",
    "Replicate_Ignore_Server_Ids": "",
    "Master_Server_Id": 1,
    "Master_UUID": "6cd4f3a3-a40b-11e8-a699-0242ac1c0002",
    "Master_Info_File": "/var/lib/mysql/master.info",
    "SQL_Delay": 0,
    "SQL_Remaining_Delay": null,
    "Slave_SQL_Running_State": "Slave has read all relay log; waiting for more updates",
    "Master_Retry_Count": 86400,
    "Master_Bind": "",
    "Last_IO_Error_Timestamp": "",
    "Last_SQL_Error_Timestamp": "",
    "Master_SSL_Crl": "",
    "Master_SSL_Crlpath": "",
    "Retrieved_Gtid_Set": "",
    "Executed_Gtid_Set": "",
    "Auto_Position": 0,
    "Replicate_Rewrite_DB": "",
    "Channel_Name": "",
    "Master_TLS_Version": ""
  }
]
```
**References**
1. [MySQL Master-Slave Replication on the Same Machine](https://www.toptal.com/mysql/mysql-master-slave-replication-tutorial)
2. [Docker MySql doc](https://hub.docker.com/_/mysql/)
3. [Docker MYSQL master-slave replication](https://github.com/gritt/docker-mysql-replication)

### [T] - Mac Apps & Chrome extensions recomendation
------
- [istat-menus](https://bjango.com/mac/istatmenus/)

  Powerful app to monitor Mac and fancy Dashboards:
    - CPU & GPU
    - Memory
    - Network
    - Date & Time
    - Weather
    - Battery & Power
    ...
  

- [Vimium](https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?hl=en)

Vimium provides keyboard shortcuts for navigation and control in the spirit of Vim.

If you are vim user, it will save your ass~ :p



### [S] - [Share some Podcasts I daily listen](https://www.evernote.com/l/AeMkAvWwCilO94LkwRtEv1TTAT2X8NOT7iw)
------ 

- [Accidental tech Podcast](http://atp.fm/)
ATP is a podcast about Tech, Apple and related matters, that was created while trying trying to do a car show.
hosted byMarco Arment, Casey Liss, and John Siracusa.

- [The Talk Show](http://5by5.tv/talkshow)
The Talk Show features discussion about technology, Apple, Mac, iPhone, iPad, movies, directors, and the Web. It’s America’s favorite podcast. 
Hosted by John Gruber, and Dan Benjamin

- [Google Cloud Platform Podcast](https://www.gcppodcast.com/)
Weekly talk about GCP, and other products by talking to googlers and other tech leaders
Hosted by Mark Mandel and Melanie Warrick

- [路书](https://lushu88.com/)
由古村和瞿侠老师引领大家一起讨论艺术史和历史的一档播客

- [选美](http://xuanmei.us/)
聊聊美国那些事

- [天书广播](https://player.fm/series/series-1403151)
张湛博士说历史,奇闻逸事

- [忽左忽右](https://huzuohuyou.podbean.com/)
程衍樑和杨一发起并制作的谈话类播客节目。我们将每期邀请一位在专业领域拥有足够发言权的嘉宾，尽我们所能，探索在某个单一问题上所能达到的讨论深度。

- [硬影像](https://hardimage.pro/)
罗登主持，是一个关注影像之一切的播客。谈论影像背后的技术，历史和哲理。

- [Sinica Podcast - Weekly discussion of current affairs in China](https://player.fm/series/sinica-podcast-weekly-discussion-of-current-affairs-in-china-1466873)
A weekly discussion of current affairs on China with journalists, writers, academics, policy makers, business people and anyone with something compelling to say about the country that's reshaping the world. Sinica is hosted by Kaiser Kuo and Jeremy Goldkorn.

- [996 Podcast with GGV Capital](https://996.ggvc.com/podcast/)
“996” is the demanding work schedule many Chinese founders have organically adopted: 9am to 9pm, 6 days a week. To us, 996 captures the intensity, drive, and speed of Chinese internet companies, many of which are moving faster than their American counterparts.

- [Business Wars](https://wondery.com/shows/business-wars/)
Business wars gives you the unauthorized, real story of what drives these companies and their leaders, inventors, investors and executives to new heights or to ruin.
Hosted by David D. Brown

- [Acquired](http://www.acquired.fm/)
A podcast about technology acquisitions and IPOs.
Acquired goes behind the scenes of the best (and worst) acquisitions and IPOs of all time. From the Instagram A+'s to the AOL-Time Warner fails, what can we learn from their journeys and apply to our own organizations and careers in business and in tech?
Hosted by @gilbert and @djrosent.

- [Planet Money NPR](https://www.npr.org/podcasts/510289/planet-money)
The economy explained. Imagine you could call up a friend and say, "Meet me at the bar and tell me what's going on with the economy.

- [NPR politics podcast](https://www.npr.org/podcasts/510310/npr-politics-podcast)
The NPR Politics Podcast is where NPR's political reporters talk to you like they talk to each other. With weekly roundups and quick takes on news of the day, you don't have to keep up with politics to know what's happening.

- [NPR How I Built this](https://www.npr.org/podcasts/510313/how-i-built-this)
Guy Raz dives into the stories behind some of the world's best known companies. How I Built This weaves a narrative journey about innovators, entrepreneurs and idealists—and the movements they built

- [The American Life](https://www.thisamericanlife.org/) 
This American Life is a weekly public radio program and podcast. Each week we choose a theme and put together different kinds of stories on that theme. 
